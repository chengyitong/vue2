function GetCookieDomain() {
	var host = location.hostname;
	var ip =
		/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
	if (ip.test(host) == true || host == 'localhost') return host;
	var regex = /([^]*).*/;
	var match = host.match(regex);
	if (typeof match !=
		"undefined" && null != match) host = match[1];
	if (typeof host !=
		"undefined" && null != host) {
		var strAry = host.split(".");
		if (strAry.length > 1) {
			host = strAry[strAry.length - 2] + "." +
				strAry[strAry.length - 1];
		}
	}
	return '.' + host;
}
var cookie_domain = GetCookieDomain();
// 添加一个cookie,该函数接收3个参数：cookie名称，cookie值，以及在多少小时后过期
// 约定expiresHours为0时不设定过期时间，即当浏览器关闭时cookie自动消失
function setCookie(name, value, expiresHours) {
	var cookieString = name + "=" + escape(value);
	//判断是否设置过期时间 
	if (expiresHours > 0) {
		var date = new Date();
		date.setTime(date.getTime + expiresHours * 3600 * 1000);
		cookieString = cookieString + "; expires=" + date.toGMTString() + ";path=/;domain=" + cookie_domain;
	}
	document.cookie = cookieString;
}

// 获取指定名称的cookie值：getCookie(name) 
// 该函数返回名称为name的cookie值，如果不存在则返回空
function getCookie(name) {
	var prefix = name + "=";
	var start = document.cookie.indexOf(prefix);

	if (start == -1) {
		return null;
	}

	var end = document.cookie.indexOf(";", start + prefix.length);
	if (end == -1) {
		end = document.cookie.length;
	}

	var value = document.cookie.substring(start + prefix.length, end);
	return unescape(value);
}

// 删除指定名称的cookie：deleteCookie(name) 
// 该函数可以删除指定名称的cookie
function deleteCookie(name) {
	var date = new Date();
	date.setTime(date.getTime() - 10000);
	document.cookie = name + "=v; expires=" + date.toGMTString() + ";path=/;domain=" + cookie_domain;
}

// 一键清除浏览器所有cookie
function clearAllCookie() {
	var keys = document.cookie.match(/[^ =;]+(?=\=)/g);
	if (keys) {
		for (var i = keys.length; i--;)
			document.cookie = keys[i] + '=0;expires=' + new Date(0).toUTCString() + ";path=/;domain=" + cookie_domain;
	}
}